<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHgtNA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <title>Bone fracture detection </title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap Icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- SimpleLightbox plugin CSS-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/static/css/styles.css" rel="stylesheet">
        <script src="/static/js/scripts.js"></script>

    </head>
    <body id="page-top">
        <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
            <div class="container px-4 px-lg-5">
                <h1 class="navbar-brand"  href="#page-top">X-ray Bone fracture detection </h1>
               
                    
                </div>
            </div>
        </nav> 
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 h-100">
                <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-8 align-self-end">
                        <h1 class="text-white font-weight-bold">Bone fracture detection</h1>
                        <hr class="divider" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 mb-5">Check your X-ray results online and gain a clear understanding of your bone health </p>
                        <a class="btn btn-primary btn-xl" href="#infos">Get Started</a>
                    </div>
                </div>
            </div>
        </header>

        <section class="page-section" id="infos">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8 col-xl-6 text-center">
                        <h2 class="mt-0">Please Fill in the Form</h2>
                        <hr class="divider" />
                        <p class="text-muted mb-5">Ensure that you enter accurate and complete information in the form. This helps us provide you with the best possible service and accurate results.</p>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center mb-5">
                    <div class="col-lg-6">
                      
                        <form action="/" method="post" enctype="multipart/form-data" id="infoForm">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input maxlength="15" type="text" class="form-control" id="name" name="name" value="{{ name }}" required pattern="[A-Za-z]+">
                                <label for="name">Name</label>
                                <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" required pattern="[A-Za-z]+" id="surname" name="surname" value="{{ surname }}" required>
                                <label maxlength="15" for="surname">Surname</label>
                                <div class="invalid-feedback" data-sb-feedback="surname:required">A surname is required.</div>
                            </div>
                            <div class="form-floating mb-3">
                                <input required type="date" class="form-control" id="dob" name="dob" value="{{ dob }}">

                                <label for="dob">Date of Birth:</label>
                                <div class="invalid-feedback" data-sb-feedback="dob:required">Date of birth is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" name="email" type="email" placeholder="name@example.com" value="{{ email }}" required>
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                             <br>
                             <select required style="padding: 10px; " class="form-select form-select-lg mb-3" aria-label="Large select example" name="body_part" id="body_part_select">
                                <option disabled {% if not body_part %}selected{% endif %}>Choose the right body part ...</option>
                                <option value="Elbow" {% if body_part == 'Elbow' %}selected{% endif %}>ðŸ¦´ Elbow</option>
                                <option value="Finger" {% if body_part == 'Finger' %}selected{% endif %}>ðŸ¦´ Finger</option>
                                <option value="Forearm" {% if body_part == 'Forearm' %}selected{% endif %}>ðŸ¦´ Forearm</option>
                                <option value="Wrist" {% if body_part == 'Wrist' %}selected{% endif %}>ðŸ¦´ Wrist</option>
                                <option value="Humerus" {% if body_part == 'Humerus' %}selected{% endif %}>ðŸ¦´ Humerus</option>
                                <option value="Shoulder" {% if body_part == 'Shoulder' %}selected{% endif %}>ðŸ¦´ Shoulder</option>
                            </select>
                            <div class="form-floating mb-3">
                                <!-- File input does not support 'value' attribute to retain previous data -->
                                <div style="height: 50px;" class="file-upload-wrapper">
                                    <input type="file" name="inputpic" id="file-upload"  class="file-upload-input" accept="image/*" required onchange="updateFileName()">
                                    <label  class="file-upload-label" for="file-upload">
                                      <div style="margin-top: 20px;" class="px-4 px-lg-5 custom-file-upload btn btn-success">{{ file_name if file_name else "Upload X-RAY" }}</div>
                                     
                                     
                                  </div>
                                
                            </div></div>
                            <!-- Submit success message-->
                            
                            <!-- Submit Button-->
                            <div class="d-grid">
                                <button id="submitButton" class="btn btn-primary btn-xl" type="submit">
                                    <i id="buttonIcon" class="fa-solid fa-laptop-medical loading-icon"></i>
                                    Check
                                </button>

                            </div>
                        </form>
                        
                    </div>
                    {% if error %}
                    <script type="text/javascript">
                        alert("{{ error }}");
                    </script>
                {% endif %}
                    {{ result_content|safe }}
                    {{ pdfgen|safe }}
                    {% include 'BoneBot.html' %}

        <footer class="bg-light py-5">
            <div class="container px-4 px-lg-5"><div class="small text-center text-muted">Copyright &copy; 2024 - Skander Benkhdoja - Abderraouf Bensam
                <hr class="divider" />
                <h5>Disclaimer</h5>
                <p>The information provided on this website is intended for general informational purposes only and should not be construed as medical advice, diagnosis, or treatment. Bone fractures can have significant consequences, impacting your overall health and well-being. It is crucial to understand that each individual case is unique, and proper diagnosis and treatment require the expertise of a qualified healthcare professional.
                    </p>
            </div></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- SimpleLightbox plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>

        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
   <script>


        document.getElementById('name').addEventListener('input', function (e) {
            var input = e.target;
            var regex = /[^a-zA-Z]/g; // Regex to match any character that is not a letter
            input.value = input.value.replace(regex, '');
        });  
        document.getElementById('surname').addEventListener('input', function (e) {
            var input = e.target;
            var regex = /[^a-zA-Z]/g; // Regex to match any character that is not a letter
            input.value = input.value.replace(regex, '');
        });  
        document.getElementById('email').addEventListener('input', function (e) {
        var input = e.target;
        var regex = /[^a-zA-Z0-9@._-]/g; // Regex to match any character that is not allowed
        input.value = input.value.replace(regex, '');  });
</script>

    </body>
</html>
